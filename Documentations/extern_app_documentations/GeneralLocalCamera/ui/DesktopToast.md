# 模块名称 DesktopToast

功能概述
 DesktopToast 是一个轻量级的消息提示组件，继承自 QWidget，用于在桌面应用中以动画方式依次展示多条文本消息。它内部维护一个先进先出的消息队列，在收到新的提示请求时将其加入队列并按照入队顺序逐条显示，避免因短时间内大量消息产生重叠或丢失。

构造与初始化
 调用 DesktopToast 的显式构造函数时，可传入可选的父窗口指针。构造过程中会创建用于显示文本的 QLabel，并初始化动画相关的起始和结束位置，以及维护窗口显示时长和动画时长的成员变量。组件在初始化后即可准备接收消息。

公有方法
 set_message 方法用于向提示组件提交一条新的文本消息。此方法会将消息内容入队，如果当前没有正在显示的动画，则会触发内部信号 do_show_toast，从而开始显示队头消息。

信号说明
 do_show_toast 信号在内部用于驱动消息显示的流程，携带要显示的文本内容。该信号连接到组件自身的消息显示实现槽，确保在 Qt 的事件循环中以异步方式启动动画和文本更新。

私有方法与成员
 组件通过 adjust_place 方法计算并设置消息标签在窗口中的正确位置，使得动画能够从起始点平滑移动到结束点。start_animation 和 start_close_animation 分别负责启动显示和关闭动画，包括位置移动和透明度渐变。set_message_impl 是实际将文本设置到 QLabel 上并启动首次动画的内部实现。组件维护一个 QQueue 类型的消息池，用于缓冲未显示的消息内容；由于队列在多线程环境下并不线程安全，如需跨线程操作，应在外部添加锁保护。成员变量 animation_maintain_msec 和 wait_time 用于控制动画持续时长及消息停留时长，moveAnimation 和 fadeAnimation 分别负责位置与透明度的动画效果，isOpening 和 isHandling 标志当前是否正处于打开或处理状态。

使用示例
 在应用主界面中构造 DesktopToast 并将其作为中央窗口或浮动层添加到主窗口后，任何模块只需调用 desktopToast->set_message("提示内容")，即可将这条消息排入显示队列。组件会按顺序依次弹出提示，每条消息在屏幕上先执行入场动画，停留指定时间后再执行退出动画，随后自动显示下一条消息。这样可以有效避免并发提示冲突，使用户获得平滑连贯的消息通知体验。